(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{166:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(0),r=a(14),c=a.n(r),o=a(4),i=a(22),l=a(82),u=a(83),d=(a(95),a(7)),j=Object(i.combineReducers)({logIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(d.a)(Object(d.a)({},e),{},{logIn:t.payload});default:return e}},signUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP":return Object(d.a)(Object(d.a)({},e),{},{signUp:t.payload});default:return e}},logOut:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return Object(d.a)(Object(d.a)({},e),{},{logOut:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS":return Object(d.a)(Object(d.a)({},e),{},{users:t.payload});default:return e}},CurrentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ME":return Object(d.a)(Object(d.a)({},e),{},{CurrentUser:t.payload});default:return e}},GlobalMessages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GLOBAL_MSG":return Object(d.a)(Object(d.a)({},e),{},{GlobalMessages:t.payload});default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POST_GLOBAL_MSG":return Object(d.a)(Object(d.a)({},e),{},{message:t.payload});default:return e}}}),p=a(3),b=a(9),m=a(28),h=a(6),O=a.n(h),f=a(19),g=a(20),v=a.n(g),x=a(10),y=Object(x.a)(),_=a(23),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(f.a)(O.a.mark((function t(a){var n,s,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{"Content-Type":"application/json"}},t.next=3,v.a.get("/api/chats/users?keyword=".concat(e),n);case 3:s=t.sent,r=s.data,a({type:"GET_USERS",payload:r.data.users});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},w=(a(114),function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(_.a,{draggable:!0,transition:_.b,autoClose:2500})})}),C=function(){var e=Object(o.b)(),t=Object(s.useState)(""),a=Object(b.a)(t,2),r=a[0],c=a[1],i=Object(s.useState)(""),l=Object(b.a)(i,2),u=l[0],d=l[1],j=Object(o.c)((function(e){return e.logIn})).logIn;return Object(n.jsx)("main",{className:"main",children:Object(n.jsxs)("div",{className:"login-form",children:[Object(n.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Log into your account"}),j&&"Error"===j.status&&Object(n.jsx)(w,{}),Object(n.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(){var a=Object(f.a)(O.a.mark((function a(n){var s,r,c;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,s={headers:{"Content-Type":"application/json"}},a.next=4,v.a.post("/api/chats",{email:e,password:t},s);case 4:r=a.sent,c=r.data,n({type:"LOGIN",payload:c}),y.push("/room"),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),n({type:"LOGIN",payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data:a.t0.message}),_.c.error(a.t0.response.data.message,{position:"top-center",className:"alert",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}()}(r,u))},children:[Object(n.jsxs)("div",{className:"form__group",children:[Object(n.jsx)("label",{className:"form__label",htmlFor:"email",children:"Email address"}),Object(n.jsx)("input",{className:"form__input",id:"email",type:"email",placeholder:"you@example.com",required:"",value:r,onChange:function(e){return c(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form__group ma-bt-md",children:[Object(n.jsx)("label",{className:"form__label",htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{className:"form__input",id:"password",type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:"",minLength:"8",value:u,onChange:function(e){return d(e.target.value)}})]}),Object(n.jsx)("div",{className:"form__group",children:Object(n.jsx)("button",{className:"btn btn--blue",type:"submit",children:"Login"})}),Object(n.jsx)("div",{className:"form__group",children:Object(n.jsx)(m.a,{to:"/singup",className:"link",children:"Create new account ?"})})]})]})})},S=function(){var e=Object(o.b)(),t=Object(s.useState)(""),a=Object(b.a)(t,2),r=a[0],c=a[1],i=Object(s.useState)(""),l=Object(b.a)(i,2),u=l[0],d=l[1],j=Object(s.useState)(""),p=Object(b.a)(j,2),h=p[0],g=p[1],x=Object(s.useState)(""),N=Object(b.a)(x,2),C=N[0],S=N[1],G=Object(o.c)((function(e){return e.signUp})).signUp;return Object(n.jsx)("main",{className:"main",children:Object(n.jsxs)("div",{className:"login-form",children:[Object(n.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Create your account!"}),G&&"Error"===G.status&&Object(n.jsx)(w,{}),Object(n.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t,a,n){return function(){var s=Object(f.a)(O.a.mark((function s(r){var c,o,i;return O.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,c={headers:{"Content-Type":"application/json"}},s.next=4,v.a.post("/api/chats/signup",{name:e,email:t,password:a,passwordConfirm:n},c);case 4:o=s.sent,i=o.data,r({type:"SIGNUP",payload:i}),_.c.success("Completed Registration,Please go to login",{position:"top-center",className:"alert",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),y.push("/"),s.next=15;break;case 11:s.prev=11,s.t0=s.catch(0),r({type:"SIGNUP",payload:s.t0.response&&s.t0.response.data.message?s.t0.response.data:s.t0.message}),_.c.error(s.t0.response.data.message,{position:"top-center",className:"alert",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});case 15:case"end":return s.stop()}}),s,null,[[0,11]])})));return function(e){return s.apply(this,arguments)}}()}(r,u,h,C))},children:[Object(n.jsxs)("div",{className:"form__group",children:[Object(n.jsx)("label",{className:"form__label",htmlFor:"name",children:"Your name"}),Object(n.jsx)("input",{className:"form__input",id:"name",type:"text",placeholder:"",required:"",value:r,onChange:function(e){return c(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form__group",children:[Object(n.jsx)("label",{className:"form__label",htmlFor:"email",children:"Email address"}),Object(n.jsx)("input",{className:"form__input",id:"email",type:"email",placeholder:"you@example.com",required:"",value:u,onChange:function(e){return d(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form__group ma-bt-md",children:[Object(n.jsx)("label",{className:"form__label",htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{className:"form__input",id:"password",type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:"",minLength:"8",value:h,onChange:function(e){return g(e.target.value)}})]}),Object(n.jsxs)("div",{className:"form__group ma-bt-md",children:[Object(n.jsx)("label",{className:"form__label",htmlFor:"passwordConfirm",children:"Confirm password"}),Object(n.jsx)("input",{className:"form__input",id:"passwordConfirm",type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:"",minLength:"8",value:C,onChange:function(e){return S(e.target.value)}})]}),Object(n.jsx)("div",{className:"form__group",children:Object(n.jsx)("button",{className:"btn btn--blue",children:"Sign up"})}),Object(n.jsx)("div",{className:"form__group",children:Object(n.jsx)(m.a,{to:"/",className:"link",children:"Already have an account ?"})})]})]})})},G=function(e){e.name;var t=Object(o.b)(),a=Object(s.useState)(""),r=Object(b.a)(a,2),c=r[0],i=r[1];return Object(n.jsxs)("header",{className:"header",children:[Object(n.jsx)("div",{className:"header__logo",children:Object(n.jsx)("img",{src:"images/brand.png",alt:"Brand"})}),Object(n.jsx)("nav",{className:"nav nav--tours",children:Object(n.jsx)("form",{className:"nav__search",onSubmit:function(e){e.preventDefault(),t(N(c)),""===c&&t(N())},children:Object(n.jsx)("input",{type:"text",placeholder:"Search Friend",className:"nav__search-input",value:c,onChange:function(e){i(e.target.value)}})})}),Object(n.jsx)("nav",{className:"nav nav--user",children:Object(n.jsx)("button",{className:"nav__el nav__el--cta",onClick:function(e){e.preventDefault(),t(function(){var e=Object(f.a)(O.a.mark((function e(t){var a,n,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.next=3,v.a.get("/api/chats/logout",a);case 3:n=e.sent,s=n.data,t({type:"LOGOUT",payload:s}),y.push("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"log out"})})]})},T=a(84),k=a.n(T),L=function(){return function(){var e=Object(f.a)(O.a.mark((function e(t){var a,n,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.next=3,v.a.get("/api/chats/global",a);case 3:n=e.sent,s=n.data,t({type:"GET_GLOBAL_MSG",payload:s.data.globalMessage});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=a(85),E=a.n(U),M=function(e){var t=e.GlobalMessages,a=e.CurrentUser;return Object(n.jsx)(E.a,{className:"conversation",children:t&&t.map((function(e){return e.fromObj[0]._id===a._id?Object(n.jsxs)("div",{className:"messageContainer justifyEnd",children:[Object(n.jsx)("p",{className:"sentText pr-10",children:e.fromObj[0].name}),Object(n.jsx)("div",{className:"messageBox backgroundBlue",children:Object(n.jsx)("p",{className:"messageText colorWhite",children:e.body})})]},e._id):Object(n.jsxs)("div",{className:"messageContainer justifyStart",children:[Object(n.jsx)("div",{className:"messageBox backgroundLight",children:Object(n.jsx)("p",{className:"messageText colorDark",children:e.body})}),Object(n.jsx)("p",{className:"sentText pl-10 ",children:e.fromObj[0].name})]},e._id)}))})},B=function(e){var t=e.users,a=e.name;return t?Object(n.jsxs)("div",{className:"side-bar",children:[Object(n.jsx)("div",{className:"head-list",children:Object(n.jsx)("h2",{children:"strangers"})}),Object(n.jsx)("ul",{children:t&&t.map((function(e){if(e.name!==a)return Object(n.jsxs)("li",{onClick:function(e){return function(e){console.log(e.target.innerText)}(e)},children:[Object(n.jsx)("i",{className:"far fa-user-circle"})," ",Object(n.jsx)("h3",{children:e.name})]},e._id)}))})]}):Object(n.jsx)("ul",{children:Object(n.jsx)("li",{className:"global",children:Object(n.jsx)("h2",{children:"Loading... "})})})},I=function(e){var t=e.onSendMessage,a=e.onMessageChange,s=e.message;return Object(n.jsxs)("form",{onSubmit:t,className:"msg-form ",children:[Object(n.jsx)("input",{className:"msg-input ",type:"text",placeholder:"Type a message...",value:s,onChange:a}),Object(n.jsx)("button",{className:"sendButton",children:Object(n.jsx)("i",{className:"fas fa-location-arrow"})})]})},P=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.users})).users,a=Object(o.c)((function(e){return e.CurrentUser})),r=Object(o.c)((function(e){return e.GlobalMessages})).GlobalMessages,c=Object(s.useState)(""),i=Object(b.a)(c,2),l=i[0],u=i[1],d=Object(s.useState)([]),j=Object(b.a)(d,2),p=(j[0],j[1]),m=Object(s.useState)(null),h=Object(b.a)(m,2),g=h[0],x=h[1];Object(s.useEffect)((function(){e(N()),y()}),[g,e]),Object(s.useEffect)((function(){k()("localhost:5000").on("messages",(function(e){return x(e)}))}),[]);var y=function(){e(L()).then((function(e){p(e)})),p([])};if(!r)return Object(n.jsx)("div",{children:"Loading..."});return Object(n.jsxs)("div",{className:"main-twin",children:[Object(n.jsx)(B,{users:t,name:a.CurrentUser.name}),Object(n.jsx)("div",{className:"outerContainer",children:Object(n.jsxs)("div",{className:"chat-container",children:[Object(n.jsx)("h2",{children:a.CurrentUser.name}),Object(n.jsx)(M,{GlobalMessages:r,CurrentUser:a.CurrentUser}),Object(n.jsx)(I,{onMessageChange:function(e){u(e.target.value)},onSendMessage:function(t){var a;t.preventDefault(),e((a=l,function(){var e=Object(f.a)(O.a.mark((function e(t){var n,s,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"}},e.next=3,v.a.post("/api/chats/global",{body:a},n);case 3:s=e.sent,r=s.data,t({type:"POST_GLOBAL_MSG",payload:r.data.message});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e(L()),u("")},message:l})]})})]})},F=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.CurrentUser}));return Object(s.useEffect)((function(){e(function(){var e=Object(f.a)(O.a.mark((function e(t){var a,n,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.next=3,v.a.get("/api/chats/me",a);case 3:n=e.sent,s=n.data,t({type:"GET_ME",payload:s.data.user});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),t.CurrentUser?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(G,{}),Object(n.jsx)(P,{})]}):Object(n.jsx)("h2",{children:"Loading... "})},D=function(){return Object(n.jsxs)(p.b,{history:y,children:[Object(n.jsx)(p.a,{path:"/",exact:!0,component:C}),Object(n.jsx)(p.a,{path:"/singup",exact:!0,component:S}),Object(n.jsx)(p.a,{path:"/room",exact:!0,component:F})]})},q=[u.a],A=Object(i.createStore)(j,Object(l.composeWithDevTools)(i.applyMiddleware.apply(void 0,q)));c.a.render(Object(n.jsx)(o.a,{store:A,children:Object(n.jsx)(D,{})}),document.getElementById("root"))},95:function(e,t,a){}},[[166,1,2]]]);
//# sourceMappingURL=main.24d81db1.chunk.js.map